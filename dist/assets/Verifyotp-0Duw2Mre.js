import{r as u,u as f,j as a}from"./index-CEvm53SA.js";import{a as x}from"./axios-BimPEqV4.js";const y=()=>{const[r,d]=u.useState(new Array(6).fill("")),[l,c]=u.useState(""),i=f(),o=localStorage.getItem("email");if(!o)return i("/login"),null;const m=s=>{const[e,t]=s.split("@");return`${`${e[0]}****${e[e.length-1]}`}@${t}`},p=(s,e)=>{const t=s.value.replace(/[^0-9]/g,"");if(t.length<=1){const n=[...r];n[e]=t,d(n),t&&e<5&&document.getElementById(`otp-input-${e+1}`).focus()}},g=async s=>{s.preventDefault();const e=r.join("");try{const t=await x.post("https://backend-pdfchatarif.onrender.com/verify-otp",{email:o,otp:e},{headers:{"Content-Type":"application/json"},withCredentials:!0});c(t.data.message),t.data.message==="OTP verified"&&(localStorage.setItem("userId",t.data.userId),localStorage.setItem("author",t.data.username),i("/upload"),window.location.reload())}catch{c("Invalid or expired OTP")}};return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:a.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-lg",children:[a.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"OTP Verification"}),a.jsxs("h4",{className:"text-green-500",children:["OTP is sent to email ",m(o)]}),a.jsxs("form",{className:"space-y-6",onSubmit:g,children:[a.jsx("div",{className:"flex justify-center space-x-2",children:r.map((s,e)=>a.jsx("input",{type:"text",id:`otp-input-${e}`,value:s,onChange:t=>p(t.target,e),className:"w-12 px-2 py-2 text-center text-gray-900 bg-gray-50 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",maxLength:"1",required:!0},e))}),a.jsx("button",{type:"submit",className:"w-full px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300",children:"Verify OTP"})]}),l&&a.jsx("p",{className:"text-center text-sm font-medium text-red-600",children:l})]})})};export{y as default};
